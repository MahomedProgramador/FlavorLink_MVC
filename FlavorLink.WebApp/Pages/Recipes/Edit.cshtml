@page "{id}"
@model FlavorLink.WebApp.Pages.Recipes.EditModel
@{
	ViewData["Title"] = "Edit";
	var imagePath = "~/images/" + Model.Recipe.ImagePath;	
}

<h1>Edit Recipe</h1>

<form method="post" class="mt-3">
	<input hidden asp-for="Recipe.Id" />
	<div class="form-group row">
		<label asp-for="Recipe.Name" class="col-sm-2 col-form-label" placeholder="Name"></label>
		<div class="col-sm-10">
			<input asp-for="Recipe.Name" class="form-control" placeholder="Title" />
			<span asp-validation-for="Recipe.Name" class="text-danger"></span>
		</div>
	</div>

	<div class="form-group row">
		<label asp-for="Recipe.PrepMethod" class="col-sm-2 col-form-label" placeholder="Preparation Method">Preparation</label>
		<div class="col-sm-10">
			<input asp-for="Recipe.PrepMethod" class="form-control" placeholder="Preparation Method" />
		</div>
	</div>

	@foreach(var ingredient in Model.Ingredients)
	{		
		<div class="form-group row">			

			<div class="col-sm-2">
				<input type="checkbox" asp-for="@ingredient.Selected" />
				Select Ingredient
			</div>

				<label asp-for="@ingredient.Name" input type="checkbox" class="col-sm-2 col" placeholder="ingredient.Name">Name</label>		
							
				<div class="col-sm-8">
					<input asp-for="@ingredient.Name" class="form-control" placeholder="Ingredients" />
				</div>

				<div class="form-group row">
					<label asp-for="@ingredient.Measurement" class="col-sm-2 col-form-label" placeholder="Measurement">@ingredient.Name Measure</label>
					<div class="col-sm-10">
						<input asp-for="@ingredient.Measurement" class="form-control" placeholder="Measure" />
					</div>
				</div>
		</div>		
	}
		<div>
		<a asp-page="/Ingredients/Index"  class="btn btn-primary m-1">Add Ingredient</a>
		<a asp-page="/Ingredients/Delete" asp-route-id = "@Model.Recipe.Id"  class="btn btn-danger m-1">Remove Ingredients</a>
		</div>

		<div class="form-group row">
			<label asp-for="Recipe.Difficulty" class="col-sm-2 col-form-label">Difficulty</label>
			<div class="col-sm-10">
				<div class="dropdown">
					<button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="difficultyDropdownButton">
						Select Difficulty
					</button>
					<ul class="dropdown-menu">
						@for (int i = 1; i <= 10; i++)
						{
							<li><a class="dropdown-item" onclick="updateDifficultyDropdownButton('@i')">@i</a></li>
						}
					</ul>
				</div>
			</div>
		</div>

		<div class="form-group row">
			<label asp-for="Recipe.Rating" class="col-sm-2 col-form-label">Rating</label>
			<div class="col-sm-10">
				<div class="dropdown">
					<button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="ratingDropdownButton">
						Select Rating
					</button>
					<ul class="dropdown-menu">
						@for (int i = 1; i <= 5; i++)
						{
							<li><a class="dropdown-item" onclick="updateRatingDropdownButton('@i')">@i</a></li>
						}
					</ul>
				</div>
			</div>
		</div>
	
		<div>
			<img class="imageThumbnail" src="@imagePath" asp-append-version="true" style="width: 300px; height: auto;" />		
		</div>

		<div class="form-group row">
			
			<div class="col-sm-10">
				<input asp-for="Image" class="form-control" />
				<label>Click to change the picture</label>
			</div>
		</div>	

	<button type="submit" class="btn btn-primary m-1">Update</button>
	<a asp-page="/Recipes/Index" class="btn btn-primary m-1">Cancel </a>
</form>



<script>
	function updateDifficultyDropdownButton(value) {
		document.getElementById("difficultyDropdownButton").textContent = value;		
	}

	function updateRatingDropdownButton(value){
		document.getElementById("ratingDropdownButton").textContent = value;
	}
</script>
